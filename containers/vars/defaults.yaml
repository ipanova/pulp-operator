---
# Default variables for building the container images.
#
# To override, either:
# a. Create vars.yaml in this dir
# b: Pass JSON args to ansible's -e argument.
#    PROTIP: (YAML to JSON converters exist on the web.)
# Either way, each variable can be omitted (left default) or overriden, but not
# have a null value.
# However, the entire images data structure is one variable. It must be
# entirely overriden or entirely defaulted to.
#
# For each image in images:
# key: Must be unique, but any name you'd like. Outputted during Ansible tasks.
# image_name: The name ("repo") of the image. Mandatory.
# tag: The tag (version string) for the image. Mandatory.
# pulpcore: The pip install string for pulpcore. Must accept [postgres] being
#           appended to the end, so for git URLs, keep #egg=pulpcore on the end.
#           Defaults to "pulpcore" (latest stable from PyPi) via playbook logic.
#           To keep the default, leave undefined, do not let it be a null value.
#           For paths on disk, specify paths relative to the parent dir of
#           "pulpcore", beginning with "./", such as "./pulpcore".
# plugins: List of pip install strings for plugins.
#          To specify no plugins, leave undefined, do not let it be a null value.
#          For paths on disk, specify paths relative to the parent dir
#          of "pulpcore", beginning with "./", such as
#          "./pulp_rpm".
#
# registry: The image registry to push to, and to tag for.
# project: The project (username/organization) on the registry to push to,
#          and to tag for.
images:
  - pulpcore_master:
      image_name: pulpcore
      tag: latest
      container_file: Containerfile.core
      # Must specify egg name here so that the Dockerfile can specify the
      # setuptools extra of postgres
      pulpcore: git+https://github.com/ipanova/pulpcore.git@upload-chunk#egg=pulpcore
  - pulp_master_plugins_master:
      image_name: pulp
      tag: latest
      container_file: Containerfile.core
      pulpcore: git+https://github.com/ipanova/pulpcore.git@upload-chunk#egg=pulpcore
      plugins:
        - "git+https://github.com/pulp/pulp-certguard.git"
        - "git+https://github.com/ipanova/pulp_container.git@upload-chunked"
  - pulp_web_master:
      image_name: pulp-web
      tag: latest
      container_file: Containerfile.web
      base_image_name: pulp
      python_version: "3.9"
      plugin_snippets:
        - pulp_container
registry: docker.io
project: ipanova
